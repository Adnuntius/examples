<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Adnuntius Data: Shared Segments</title>
</head>
<body><h3>Adnuntius Data: Shared Segments</h3>
<p>Example of sharing segments between folders.</p>
<hr>
<script type="text/javascript" src="https://cdn.adnuntius.com/adn.js" async></script>

<script type="text/javascript">
function updateProfile(browserId, folderId, field, value) {
    // The consent string is the two folderIds with a `g` character as a delimiter
    // This means that the user has consented to share data between both folders.
    // So if they have a user profile in both folders (this would usually be two
    // different websites) and they registered a matching email address (or phone number)
    // for both profiles, then their segments would be shared across both sites.
    document.cookie = "adnconsent=8d2adg8d359";
    document.cookie = "browserId=" + browserId;
    window.adn = window.adn || {}; adn.calls = adn.calls || []; adn.calls.push(function() {
        adn.visitor(folderId, {browserId: browserId, profileValues: {[field]: value}});
    });
}
</script>

<h3>User ABC, Folder Adnuntius (8d359)</h3>    

<h4>Set profile properties, which will fire triggers to change segment membership</h4>    
    
<button onclick="updateProfile('abc', '8d359', 'firstName', 'Richard')">Name = Richard</button>
<button onclick="updateProfile('abc', '8d359', 'firstName', 'Bruce')">Name = Bruce</button>
<button onclick="updateProfile('abc', '8d359', 'firstName', '')">Clear Name</button>

<h4>Set the email address, which is used to match (or not) with the profile in the other folder</h4>    

<button onclick="updateProfile('abc', '8d359', 'emailPrivate', 'richard@email.com')">Email = richard@email.com</button>
<button onclick="updateProfile('abc', '8d359', 'emailPrivate', 'bruce@email.com')">Email = bruce@email.com</button>

<h3>User XYZ, Folder Other (8d2ad)</h3>    

<h4>Set profile properties, which will fire triggers to change segment membership</h4>    

<button onclick="updateProfile('xyz', '8d2ad', 'interest', 'Advertising')">Interest = Advertising</button>
<button onclick="updateProfile('xyz', '8d2ad', 'interest', 'Privacy')">Interest = Privacy</button>
<button onclick="updateProfile('xyz', '8d2ad', 'interest', '')">Clear Interest</button>
    
<h4>Set the email address, which is used to match (or not) with the profile in the other folder</h4>
    
<button onclick="updateProfile('xyz', '8d2ad', 'emailPrivate', 'richard@email.com')">Email = richard@email.com</button>
<button onclick="updateProfile('xyz', '8d2ad', 'emailPrivate', 'bruce@email.com')">Email = bruce@email.com</button>


<script type="text/javascript">
function getSegments(folderId, browserId) {
    console.log('Browser: ' + browserId);
    adn.getSegments(folderId, {
        browserId: browserId,
        onResponse: function(data) {
            segments = data.segments || [];
            console.log('Segments in folder ' + folderId + ':' + segments);
        }
    });
}
</script>

<h3>Fetch Segments (print to console)</h3>    

<h4>User ABC</h4>    
<!-- <button onclick="getSegments('8d2ad', 'abc')">Get Segments (folder 8d2ad, browser ABC)</button >-->
<button onclick="getSegments('8d359', 'abc')">Get Segments (folder 8d359, browser ABC)</button>

<h4>User XYZ</h4>    

<button onclick="getSegments('8d2ad', 'xyz')">Get Segments (folder 8d2ad, browser XYZ)</button>
<!-- <button onclick="getSegments('8d359', 'xyz')">Get Segments (folder 8d359, browser XYZ)</button> -->


</body>
</html>
