<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Adnuntius Data: Shared Segments</title>
</head>
<body><h3>Adnuntius Data: Shared Segments</h3>
<p>Example of sharing segments between folders.</p>
<hr>
<script type="text/javascript" src="https://cdn.adnuntius.com/adn.js" async></script>

<script type="text/javascript">
function updateProfile(browserId, folderId, field, value) {
    document.cookie = "abnconsent=000000000000009e0000000000000093";
    document.cookie = "browserId=" + browserId;
    window.adn = window.adn || {}; adn.calls = adn.calls || []; adn.calls.push(function() {
        adn.visitor(folderId, {browserId: browserId, env: 'dev', protocol: 'http', profileValues: {[field]: value}});
    });
}
</script>

<h3>User ABC, Folder 93</h3>    

<button onclick="updateProfile('abc', '93', 'firstName', 'Richard')">Name = Richard</button>
<button onclick="updateProfile('abc', '93', 'firstName', 'Bruce')">Name = Bruce</button>
<button onclick="updateProfile('abc', '93', 'firstName', '')">Clear Name</button>
<button onclick="updateProfile('abc', '93', 'emailPrivate', 'richard@email.com')">Email = richard@email.com</button>
<button onclick="updateProfile('abc', '93', 'emaiiPrivate', 'bruce@email.com')">Email = bruce@email.com</button>

<h3>User XYZ, Folder 9E</h3>    

<button onclick="updateProfile('xyz', '9e', 'firstName', 'Richard')">Name = Richard</button>
<button onclick="updateProfile('xyz', '9e', 'firstName', 'Bruce')">Name = Bruce</button>
<button onclick="updateProfile('xyz', '9e', 'firstName', '')">Clear Name</button>
<button onclick="updateProfile('xyz', '9e', 'emailPrivate', 'richard@email.com')">Email = richard@email.com</button>
<button onclick="updateProfile('xyz', '9e', 'emaiiPrivate', 'bruce@email.com')">Email = bruce@email.com</button>


<!-- Ad Tag -->
<hr>    
<div id="adn-0000000000000092" style="display:none"></div>
<hr>

<script type="text/javascript">
function getSegments(browserId) {
    adn.getGlobalId('0000000000000093', {
        env: 'dev',
        browserId: browserId,
        protocol: 'http',
        onResponse: function(data) {
            let uui = data.uui || '';
            console.log(uui);
            adn.getSegments('0000000000000093', {
                env: 'dev',
                protocol: 'http',
                uui: uui,
                onResponse: function(data) {
                    segments = data.segments || [];
                    console.log({folder: '0000000000000093', globalSegments: segments});
                }
            });
        }
    });

    adn.getGlobalId('000000000000009e', {
        env: 'dev',
        browserId: browserId,
        protocol: 'http',
        onResponse: function(data) {
            let uui = data.uui || '';
            adn.getSegments('000000000000009e', {
                env: 'dev',
                protocol: 'http',
                uui: uui,
                onResponse: function(data) {
                    segments = data.segments || [];
                    console.log({folder: '000000000000009e', globalSegments: segments});
                }
            });
        }
    });

    adn.getSegments('0000000000000093', {
        env: 'dev',
        browserId: browserId,
        protocol: 'http',
        onResponse: function(data) {
            segments = data.segments || [];
            console.log({folder: '0000000000000093', segments: segments});
        }
    });

    adn.getSegments('000000000000009e', {
        env: 'dev',
        browserId: browserId,
        protocol: 'http',
        onResponse: function(data) {
            segments = data.segments || [];
            console.log({folder: '000000000000009e', segments: segments});
        }
    });

}
</script>
<button onclick="getSegments('abc')">Get Segments (browser ABC)</button>
<button onclick="getSegments('xyz')">Get Segments (browser XYZ)</button>


</body>
</html>
